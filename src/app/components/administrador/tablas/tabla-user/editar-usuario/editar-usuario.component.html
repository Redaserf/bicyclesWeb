<div *ngIf="!cargando" class="container">
  <div class="card-custom">
    <h3 class="text-center mb-3">Editar Usuario</h3>

    <form [formGroup]="usuarioForm" (ngSubmit)="actualizarUsuario()">
      
      <!-- Nombre -->
      <label for="nombre">Nombre</label>
      <div class="input-group-custom">
        <i class="fa fa-user input-icon"></i>
        <input id="nombre" type="text" formControlName="nombre" placeholder="Nombre">
      </div>
      <div class="text-danger" *ngIf="usuarioForm.controls['nombre'].touched && usuarioForm.controls['nombre'].errors?.['required']">
        El nombre es obligatorio.
      </div>
      <div class="text-danger" *ngIf="usuarioForm.controls['nombre'].errors?.['servidor']">
        {{ usuarioForm.controls['nombre'].errors?.['servidor'] }}
      </div>

      <!-- Apellido -->
      <label for="apellido">Apellido</label>
      <div class="input-group-custom">
        <i class="fa fa-user input-icon"></i>
        <input id="apellido" type="text" formControlName="apellido" placeholder="Apellido">
      </div>
      <div class="text-danger" *ngIf="usuarioForm.controls['apellido'].touched && usuarioForm.controls['apellido'].errors?.['required']">
        El apellido es obligatorio.
      </div>
      <div class="text-danger" *ngIf="usuarioForm.controls['apellido'].errors?.['servidor']">
        {{ usuarioForm.controls['apellido'].errors?.['servidor'] }}
      </div>

      <!-- Email -->
      <label for="email">Email</label>
      <div class="input-group-custom">
        <i class="fa fa-envelope input-icon"></i>
        <input id="email" type="email" formControlName="email" placeholder="Email">
      </div>

      <!-- Peso -->
      <label for="peso">Peso (kg)</label>
      <div class="input-group-custom">
        <i class="fa fa-balance-scale input-icon"></i>
        <input id="peso" type="number" step="0.01" formControlName="peso" placeholder="Peso (kg)">
      </div>
      <div class="text-danger" *ngIf="usuarioForm.controls['peso'].touched && usuarioForm.controls['peso'].errors?.['required']">
        El peso es obligatorio.
      </div>
      <div class="text-danger" *ngIf="usuarioForm.controls['peso'].errors?.['min']">
        El peso debe ser mayor a 0.
      </div>
      <div class="text-danger" *ngIf="usuarioForm.controls['peso'].errors?.['servidor']">
        {{ usuarioForm.controls['peso'].errors?.['servidor'] }}
      </div>

      <!-- Estatura -->
      <label for="estatura">Estatura (m)</label>
      <div class="input-group-custom">
        <i class="fa fa-ruler-vertical input-icon"></i>
        <input id="estatura" type="number" step="0.01" formControlName="estatura" placeholder="Estatura (m)">
      </div>
      <div class="text-danger" *ngIf="usuarioForm.controls['estatura'].touched && usuarioForm.controls['estatura'].errors?.['required']">
        La estatura es obligatoria.
      </div>
      <div class="text-danger" *ngIf="usuarioForm.controls['estatura'].errors?.['min']">
        La estatura debe ser mayor a 0.
      </div>
      <div class="text-danger" *ngIf="usuarioForm.controls['estatura'].errors?.['servidor']">
        {{ usuarioForm.controls['estatura'].errors?.['servidor'] }}
      </div>

      <!-- Botones de acción -->
      <div class="d-flex justify-content-between mt-3">
        <button type="button" class="btn btn-secondary" (click)="cancelarEdicion()" [disabled]="isCancelling || usuarioForm.invalid">Cancelar</button>
        <button type="submit" class="btn btn-custom" [disabled]="usuarioForm.invalid || isLoading || isCancelling">
          <span *ngIf="isLoading" class="spinner"></span>
          Actualizar
        </button>
      </div>

      <!-- Mensaje de éxito -->
      <p *ngIf="mensajeExito" class="text-success text-center mt-2">{{ mensajeExito }}</p>
    </form>
  </div>
</div>
